<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Pitch (Tone) Analyzer for Mandarin Practice - emira.ga (Emir Bosnian)
    </title>
    <link href="./output.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      /* Style for the canvas to make it responsive and sharp */
      canvas {
        width: 100%;
        height: 300px;
        background-color: #111827; /* bg-gray-900 */
        border-radius: 0.5rem;
        image-rendering: -moz-crisp-edges;
        image-rendering: -webkit-crisp-edges;
        image-rendering: pixelated;
        image-rendering: crisp-edges;
      }
      /* Custom styles for range sliders */
      input[type="range"] {
        -webkit-appearance: none;
        appearance: none;
        width: 100%;
        height: 8px;
        background: #4b5563; /* bg-gray-600 */
        border-radius: 5px;
        outline: none;
        opacity: 0.7;
        transition: opacity 0.2s;
      }
      input[type="range"]:hover {
        opacity: 1;
      }
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        background: #3b82f6; /* bg-blue-500 */
        cursor: pointer;
        border-radius: 50%;
      }
      input[type="range"]::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: #3b82f6; /* bg-blue-500 */
        cursor: pointer;
        border-radius: 50%;
      }
    </style>
  </head>
  <body
    class="bg-gray-800 text-gray-200 flex-col items-center justify-center min-h-screen p-4"
  >
    <!-- Full-page drag and drop overlay -->
    <div
      id="dropOverlay"
      class="fixed inset-0 bg-blue-800/80 border-4 border-dashed border-blue-400 items-center justify-center hidden"
      style="z-index: 9999"
    >
      <div class="text-center">
        <svg
          class="w-16 h-16 mx-auto mb-4 text-blue-300"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
          ></path>
        </svg>
        <p class="text-blue-100 text-xl font-medium">Drop audio file here</p>
        <p class="text-blue-200 text-sm mt-2">
          Supported formats: MP3, WAV, OGG, M4A
        </p>
      </div>
    </div>

    <div class="w-full max-w-4xl mx-auto">
      <!-- Spectrogram Canvas with YIN Pitch Overlay -->
      <div
        id="dropZone"
        class="w-full bg-gray-900 rounded-lg shadow-lg p-2 relative transition-all duration-200"
      >
        <div class="relative">
          <canvas id="spectrogramCanvas"></canvas>
          <canvas
            id="yinPitchCanvas"
            class="absolute top-0 left-0 pointer-events-none"
            style="background: transparent"
          ></canvas>
          <div
            id="progressLine"
            class="absolute top-0 w-0.5 bg-white opacity-90 pointer-events-none hidden"
            style="height: 100%; left: 0%; transition: left 0.1s linear"
          ></div>
        </div>
        <div
          id="yinPitchLoadingOverlay"
          class="absolute inset-0 bg-gray-900/80 items-center justify-center rounded-lg hidden"
        >
          <div class="text-center">
            <div
              class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mx-auto mb-2"
            ></div>
            <p class="text-gray-300 text-sm">Computing YIN pitch...</p>
          </div>
        </div>
        <!-- Play Button -->
        <div id="playButton" class="flex justify-center mt-3">
          <button
            id="playStopButton"
            onclick="togglePlayStop()"
            class="flex items-center justify-center w-12 h-12 bg-blue-600 hover:bg-blue-500 rounded-full transition-colors duration-200 shadow-lg"
            title="Play audio"
          >
            <svg
              id="playIcon"
              class="w-6 h-6 text-white ml-0.5"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path d="M8 5v14l11-7z" />
            </svg>
            <svg
              id="stopIcon"
              class="w-6 h-6 text-white hidden"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <rect x="6" y="6" width="12" height="12" />
            </svg>
          </button>
          <div class="p-3.5">
            or press
            <kbd
              class="px-2 py-1.5 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg"
              >Enter</kbd
            >
            to play, hold
            <kbd
              class="px-2 py-1.5 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg"
              >Space</kbd
            >
            to record, or drag & drop an audio file.
          </div>
        </div>
      </div>

      <!-- Status Message -->
      <div
        id="status"
        class="text-center mb-4 p-3 rounded-lg bg-gray-700 transition-all duration-300"
      >
        <div class="flex items-center justify-center">
          <div
            id="statusSpinner"
            class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-300 mr-2 hidden"
          ></div>
          <p id="instructions" class="text-lg font-medium text-blue-300">
            Loading...
          </p>
        </div>
      </div>

      <!-- Algorithm Controls -->
      <div
        id="yinControlsSection"
        class="mt-3 hidden py-3 border-t border-gray-600"
      >
        <!-- YIN Controls -->
        <div>
          <button
            id="yinControlsToggle"
            class="flex items-center gap-2 text-sm font-medium transition-colors cursor-pointer"
            onclick="toggleYinControls()"
            title="Click to expand/collapse"
          >
            <span>YIN Algorithm parameters:</span>
            <svg
              id="yinControlsChevron"
              class="w-5 h-5 transform transition-transform duration-200"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              />
            </svg>
          </button>

          <div
            id="yinControls"
            class="hidden flex flex-col gap-3 bg-gray-700/50 p-4 rounded-lg mt-3"
          >
            <!-- Row 1: Frame Analysis (Step 1) -->
            <div>
              <div class="text-xs font-semibold text-gray-600 mb-2">
                Frame Analysis
              </div>
              <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <div>
                  <label
                    for="yinDifferenceMethod"
                    class="block mb-2 text-xs font-medium text-gray-300"
                    >Difference Function</label
                  >
                  <select
                    id="yinDifferenceMethod"
                    class="bg-gray-600 border border-gray-500 text-white text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1"
                  >
                    <option value="simple">Simple (Slow)</option>
                    <option value="fftSimple">FFT Simple</option>
                    <option value="fftZeroPadding">FFT Zero-Padding</option>
                  </select>
                </div>

                <div>
                  <label
                    for="yinFrameSize"
                    class="block mb-2 text-xs font-medium text-gray-300"
                    >Frame Size</label
                  >
                  <select
                    id="yinFrameSize"
                    class="bg-gray-600 border border-gray-500 text-white text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1"
                  >
                    <option value="128">128</option>
                    <option value="256">256</option>
                    <option value="512">512</option>
                    <option value="1024">1024</option>
                    <option value="2048">2048</option>
                    <option value="4096">4096</option>
                  </select>
                </div>

                <div>
                  <label
                    for="yinHopSize"
                    class="block mb-2 text-xs font-medium text-gray-300"
                    >Hop Size</label
                  >
                  <select
                    id="yinHopSize"
                    class="bg-gray-600 border border-gray-500 text-white text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1"
                  >
                    <option value="16">16</option>
                    <option value="32">32</option>
                    <option value="64">64</option>
                    <option value="128">128</option>
                    <option value="256">256</option>
                    <option value="512">512</option>
                    <option value="1024">1024</option>
                    <option value="2048">2048</option>
                    <option value="4096">4096</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Row 2: Threshold Detection (Step 3) -->
            <div>
              <div class="text-xs font-semibold text-gray-600 mb-2">
                Period detection (with Threshold)
              </div>
              <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <div>
                  <label
                    for="yinThresholdMethod"
                    class="block mb-2 text-xs font-medium text-gray-300"
                    >Method</label
                  >
                  <select
                    id="yinThresholdMethod"
                    class="bg-gray-600 border border-gray-500 text-white text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1"
                  >
                    <option value="simple">Simple</option>
                    <option value="adaptive">Adaptive (Deepest Dip)</option>
                    <option value="firstDip">First Dip (Robust)</option>
                  </select>
                </div>

                <div>
                  <label
                    for="yinThreshold"
                    class="block mb-2 text-xs font-medium text-gray-300"
                    >Threshold</label
                  >
                  <input
                    type="range"
                    id="yinThresholdSlider"
                    min="0.05"
                    max="0.9"
                    step="0.01"
                    class="w-full"
                  />
                  <div
                    class="text-xs text-gray-400 text-center mt-1"
                    id="yinThresholdValue"
                  ></div>
                </div>

                <div>
                  <label
                    for="yinFallbackThreshold"
                    class="block mb-2 text-xs font-medium text-gray-300"
                    >Fallback</label
                  >
                  <input
                    type="range"
                    id="yinFallbackThresholdSlider"
                    min="0.1"
                    max="1.0"
                    step="0.05"
                    class="w-full"
                  />
                  <div
                    class="text-xs text-gray-400 text-center mt-1"
                    id="yinFallbackThresholdValue"
                  ></div>
                </div>
              </div>
            </div>

            <!-- Row 3: Interpolation & Frequency (Steps 4-5) -->
            <div>
              <div class="text-xs font-semibold text-gray-600 mb-2">
                Interpolation & Freq Range
              </div>
              <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <div class="flex items-center">
                  <input
                    type="checkbox"
                    id="yinInterpolation"
                    class="w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"
                  />
                  <label
                    for="yinInterpolation"
                    class="ml-2 text-xs font-medium text-gray-300"
                    >Parabolic Interpolation</label
                  >
                </div>

                <div>
                  <label
                    for="yinMinFreq"
                    class="block mb-2 text-xs font-medium text-gray-300"
                    >Min Freq (Hz)</label
                  >
                  <input
                    type="range"
                    id="yinMinFreqSlider"
                    min="10"
                    max="200"
                    step="5"
                    class="w-full"
                  />
                  <div
                    class="text-xs text-gray-400 text-center mt-1"
                    id="yinMinFreqValue"
                  ></div>
                </div>

                <div>
                  <label
                    for="yinMaxFreq"
                    class="block mb-2 text-xs font-medium text-gray-300"
                    >Max Freq (Hz)</label
                  >
                  <input
                    type="range"
                    id="yinMaxFreqSlider"
                    min="100"
                    max="1000"
                    step="10"
                    class="w-full"
                  />
                  <div
                    class="text-xs text-gray-400 text-center mt-1"
                    id="yinMaxFreqValue"
                  ></div>
                </div>
              </div>
            </div>

            <!-- Row 4: Power Adjustment (Step 6) -->
            <div>
              <div class="text-xs font-semibold text-gray-600 mb-2">
                Audio Power based adjustment
              </div>
              <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <div class="flex items-center">
                  <input
                    type="checkbox"
                    id="yinPowerConfidenceAdjust"
                    class="w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"
                  />
                  <label
                    for="yinPowerConfidenceAdjust"
                    class="ml-2 text-xs font-medium text-gray-300"
                    >Power Confidence Adjust</label
                  >
                </div>

                <div>
                  <label
                    for="yinMinPowerThreshold"
                    class="block mb-2 text-xs font-medium text-gray-300"
                    >Min Power Threshold</label
                  >
                  <input
                    type="range"
                    id="yinMinPowerThresholdSlider"
                    min="0.001"
                    max="0.1"
                    step="0.001"
                    class="w-full"
                  />
                  <div
                    class="text-xs text-gray-400 text-center mt-1"
                    id="yinMinPowerThresholdValue"
                  ></div>
                </div>
              </div>
            </div>

            <!-- Row 5: Pitch smoothing and correction -->
            <div>
              <div class="text-xs font-semibold text-gray-600 mb-2">
                Pitch smoothing and octave jump correction
              </div>
              <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <div>
                  <label
                    for="yinMedianFilterWindowSize"
                    class="block mb-2 text-xs font-medium text-gray-300"
                    >Median Filter Window</label
                  >
                  <input
                    type="range"
                    id="yinMedianFilterWindowSizeSlider"
                    min="1"
                    max="11"
                    step="2"
                    class="w-full"
                  />
                  <div
                    class="text-xs text-gray-400 text-center mt-1"
                    id="yinMedianFilterWindowSizeValue"
                  ></div>
                </div>

                <div class="flex items-center">
                  <input
                    type="checkbox"
                    id="yinOctaveJumpCorrection"
                    class="w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"
                  />
                  <label
                    for="yinOctaveJumpCorrection"
                    class="ml-2 text-xs font-medium text-gray-300"
                    >Octave Jump Correction</label
                  >
                </div>

                <div>
                  <label
                    for="yinOctaveRatioThreshold"
                    class="block mb-2 text-xs font-medium text-gray-300"
                    >Octave Ratio Threshold</label
                  >
                  <input
                    type="range"
                    id="yinOctaveRatioThresholdSlider"
                    min="0.05"
                    max="0.5"
                    step="0.01"
                    class="w-full"
                  />
                  <div
                    class="text-xs text-gray-400 text-center mt-1"
                    id="yinOctaveRatioThresholdValue"
                  ></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Display Controls -->
      <div id="controls" class="py-3 border-t border-b border-gray-600">
        <button
          id="displayControlsToggle"
          class="flex items-center gap-2 text-gray-300 text-sm font-medium hover:text-gray-100 transition-colors cursor-pointer"
          onclick="toggleDisplayControls()"
          title="Click to expand/collapse"
        >
          <span>Display Settings:</span>
          <svg
            id="displayControlsChevron"
            class="w-5 h-5 transform transition-transform duration-200"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>

        <div
          id="displayControlsContent"
          class="hidden grid-cols-2 md:grid-cols-3 mt-3 gap-6 bg-gray-700/50 p-6 rounded-lg"
        >
          <div>
            <label
              for="brightness"
              class="block mb-2 text-sm font-medium text-gray-300"
              >Brightness</label
            >
            <input
              type="range"
              id="brightness"
              min="-150"
              max="100"
              class="w-full"
            />
            <div
              class="text-xs text-gray-400 text-center mt-1"
              id="brightnessValue"
            ></div>
          </div>
          <div>
            <label
              for="contrast"
              class="block mb-2 text-sm font-medium text-gray-300"
              >Contrast</label
            >
            <input
              type="range"
              id="contrast"
              min="0.0"
              max="5.0"
              step="0.1"
              class="w-full"
            />
            <div
              class="text-xs text-gray-400 text-center mt-1"
              id="contrastValue"
            ></div>
          </div>
          <div>
            <label
              for="colorScheme"
              class="block mb-2 text-sm font-medium text-gray-300"
              >Color Scheme</label
            >
            <select
              id="colorScheme"
              class="bg-gray-600 border border-gray-500 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1"
            >
              <option value="viridis">Viridis</option>
              <option value="plasma">Plasma</option>
              <option value="hot">Hot</option>
              <option value="grayscale">Grayscale</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Recording Controls -->
      <div id="recordingControls" class="py-3 border-b border-gray-600">
        <button
          id="recordingControlsToggle"
          class="flex items-center gap-2 text-gray-300 text-sm font-medium hover:text-gray-100 transition-colors cursor-pointer"
          onclick="toggleRecordingControls()"
          title="Click to expand/collapse"
        >
          <span>Recording Settings:</span>
          <svg
            id="recordingControlsChevron"
            class="w-5 h-5 transform transition-transform duration-200"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>

        <div
          id="recordingControlsContent"
          class="hidden grid-cols-2 md:grid-cols-3 mt-3 gap-6 bg-gray-700/50 p-6 rounded-lg"
        >
          <div>
            <label
              for="recordingSampleRate"
              class="block mb-2 text-sm font-medium text-gray-300"
              >Sample Rate (Hz)</label
            >
            <select
              id="recordingSampleRate"
              class="bg-gray-600 border border-gray-500 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1"
            >
              <option value="8000">8000</option>
              <option value="16000">16000</option>
              <option value="22050">22050</option>
              <option value="44100">44100</option>
              <option value="48000">48000</option>
              <option value="96000">96000</option>
            </select>
          </div>
          <div>
            <label
              for="recordingChannelCount"
              class="block mb-2 text-sm font-medium text-gray-300"
              >Channel Count</label
            >
            <select
              id="recordingChannelCount"
              class="bg-gray-600 border border-gray-500 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1"
            >
              <option value="1">Mono (1)</option>
              <option value="2">Stereo (2)</option>
            </select>
          </div>
          <div class="flex items-center">
            <input
              type="checkbox"
              id="recordingEchoCancellation"
              class="w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"
            />
            <label
              for="recordingEchoCancellation"
              class="ml-2 text-sm font-medium text-gray-300"
              >Echo Cancellation</label
            >
          </div>
          <div class="flex items-center">
            <input
              type="checkbox"
              id="recordingNoiseSuppression"
              class="w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"
            />
            <label
              for="recordingNoiseSuppression"
              class="ml-2 text-sm font-medium text-gray-300"
              >Noise Suppression</label
            >
          </div>
          <div class="flex items-center">
            <input
              type="checkbox"
              id="recordingAutoGainControl"
              class="w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"
            />
            <label
              for="recordingAutoGainControl"
              class="ml-2 text-sm font-medium text-gray-300"
              >Auto Gain Control</label
            >
          </div>
        </div>
      </div>
      <!---->
    </div>

    <!-- Audio File Links -->
    <div class="w-full max-w-4xl mx-auto mt-3">
      <div class="bg-gray-700/50 p-4 rounded-lg">
        <h4 class="text-gray-300 text-sm font-medium mb-3">
          Load Sample Audio Files: (you can also drag-and-drop your own audio
          files)
        </h4>
        <div id="sampleAudioFiles" class="flex flex-col gap-3">
          <!-- Audio files will be dynamically rendered here -->
        </div>
      </div>
    </div>

    <script>
      // Sample audio files data
      const sampleAudioFiles = [
        {
          path: "audio/ai_讀書寫字.mp3",
          maxFreq: null,
          description:
            'AI voice: "dú shū xiě zì" (read books, write characters)',
        },
        {
          path: "audio/ai_高富帥_gao1_fu4_shuai4.mp3",
          maxFreq: null,
          description: 'AI voice: "gāo fù shuài" (tall, rich, handsome)',
        },
        {
          path: "audio/ai_今天不用上班.mp3",
          maxFreq: null,
          description:
            'AI voice: "jīn tiān bù yòng shàng bān" (don\'t have to work today)',
        },
        {
          path: "audio/human_我喜歡吃東西.m4a",
          maxFreq: null,
          description:
            'Human voice: "wǒ xǐ huān chī dōng xī" (I like to eat things)',
        },
        {
          path: "audio/human_我一歲了.m4a",
          maxFreq: null,
          description: 'Human voice: "wǒ yī suì le" (I am one year old)',
        },
        {
          path: "audio/367215_1847127-lq.mp3",
          maxFreq: null,
          description: "Music: Male voice La la la la la la",
        },
        {
          path: "audio/427200_8176931-lq.mp3",
          maxFreq: 500,
          description:
            'Music: Beatiful female melody. Warning! Increase Max Freq to 500Hz, also warning! since voice is soft, you may need to reduce "Min Power Threshold"',
        },
        {
          path: "audio/417938_8176931-lq.mp3",
          maxFreq: 500,
          description:
            'Music: Female singing "Do you want to be beautiful?" Warning! Increase Max Freq to 500Hz',
        },
        {
          path: "audio/30084_129090-lq.mp3",
          maxFreq: 800,
          description:
            "Music: Very high female tone, Warning! Increase Max Freq to 800Hz",
        },
        // Test files for discontinuities
        {
          path: "audio/tone_recording_1760610667332.wav",
          maxFreq: null,
          description: "Test for discontinuities",
        },
        {
          path: "audio/tone_recording_1760616895897.wav",
          maxFreq: null,
          description: "Test for discontinuities",
        },
        {
          path: "audio/tone_recording_1760620947969.wav",
          maxFreq: null,
          description: "Test for discontinuities",
        },
        {
          path: "audio/tone_recording_1760621775872.wav",
          maxFreq: null,
          description: "Test for discontinuities",
        },
      ];

      // Render sample audio files
      function renderSampleAudioFiles() {
        const container = document.getElementById("sampleAudioFiles");
        if (!container) return;

        container.innerHTML = sampleAudioFiles
          .map((file) => {
            const fileName = file.path.split("/").pop();
            return `
            <div class="flex items-center gap-3">
              <button
                onclick="loadAudioFile('${file.path}', ${file.maxFreq})"
                class="cursor-pointer px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white text-sm rounded-lg transition-colors duration-200 whitespace-nowrap"
              >
                ${fileName}
              </button>
              <span class="text-gray-400 text-sm">
                ${file.description}
              </span>
            </div>
          `;
          })
          .join("");
      }

      // Render on page load
      renderSampleAudioFiles();
    </script>

    <!-- Debug Section -->
    <div class="w-full max-w-4xl mx-auto mt-6">
      <div class="bg-gray-700/50 p-4 rounded-lg border border-gray-600">
        <h4 class="text-gray-300 text-sm font-medium mb-3">Debug Tools</h4>
        <div class="flex gap-3">
          <button
            id="saveAudioButton"
            onclick="saveAudioFile()"
            class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-sm rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
            disabled
          >
            Save Audio File
          </button>
        </div>
      </div>
    </div>
    <script src="tone_analyzer.js"></script>
    <script src="fftjs.min.js"></script>
  </body>
</html>
